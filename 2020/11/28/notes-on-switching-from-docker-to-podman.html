<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Switching from docker to podman | Dave Compton</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Switching from docker to podman" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’ve been doing most of my coding inside docker based environments. A few weeks ago I found out about podman, a docker workalike. Podman has a couple advantages over docker : No need to run as root. Does not require the support of a daemon." />
<meta property="og:description" content="I’ve been doing most of my coding inside docker based environments. A few weeks ago I found out about podman, a docker workalike. Podman has a couple advantages over docker : No need to run as root. Does not require the support of a daemon." />
<meta property="og:site_name" content="Dave Compton" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-11-28T12:34:43-08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Switching from docker to podman" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-11-28T12:34:43-08:00","datePublished":"2020-11-28T12:34:43-08:00","description":"I’ve been doing most of my coding inside docker based environments. A few weeks ago I found out about podman, a docker workalike. Podman has a couple advantages over docker : No need to run as root. Does not require the support of a daemon.","headline":"Switching from docker to podman","mainEntityOfPage":{"@type":"WebPage","@id":"/2020/11/28/notes-on-switching-from-docker-to-podman.html"},"url":"/2020/11/28/notes-on-switching-from-docker-to-podman.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css">
  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dave Compton" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dave Compton</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Switching from docker to podman</h1>
    <p class="post-meta"><time class="dt-published" datetime="2020-11-28T12:34:43-08:00" itemprop="datePublished">
        Nov 28, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>I’ve been doing most of my coding inside docker based environments.  A few weeks ago I found out about podman, a docker workalike.   Podman has a couple advantages over docker :</p>
<ul>
  <li>No need to run as root.</li>
  <li>Does not require the support of a daemon.</li>
</ul>

<p>There is at least one disadvantage too :</p>
<ul>
  <li>Not available via apt on Ubuntu 20.04 ( which I am using ).</li>
</ul>

<p>What follows are a few notes regarding getting podman working on Ubuntu 20.04.   These are mostly for me but there’s nothing confidential here so I’m publishing it here for anyone who might run into the same (minor) issues that I ran into.</p>

<h1 id="building">BUILDING</h1>
<p>I built podman from scratch using the instructions <a href="https://podman.io/getting-started/installation.html">here</a> and ran into the following (minor) problems.</p>
<ul>
  <li>btrfs-tools was not available on Ubuntu 20.04 - used btrfs-progs instead.</li>
  <li>libprotobuf-c0-dev was not available on Ubuntu 20.04 - used libprotobuf-c-dev instead.</li>
  <li>I had GOROOT already set in my environment which did not work well with setting GOPATH as suggested in instructions.  Had to unset GOROOT.</li>
</ul>

<h1 id="running">RUNNING</h1>

<ul>
  <li>Installed slirp4netns fuse-overlayfs as needed at runtime.</li>
  <li>now need to explicitly EXPOSE appropriate ports for access from host.  In docker was relying on docker daemon to handle routing to docker local network.</li>
  <li>–userns=keep-id  was needed to get permissions right on volumes mounted from hosts.   Without this the mounted volume was only readable by root.</li>
  <li>–privileged  was needed for rust debugging to work in vscode.  Without this got error: “‘A’ packet returned an error: 8” when running a rust program from vscode.</li>
</ul>

<h1 id="bash-script">BASH SCRIPT</h1>
<p>Below is a script that builds and installs podman.  It exists in <a href="https://github.com/dc25/buildPodman">this repository</a> .  For the most part it just implements the steps found on the <a href="https://podman.io/getting-started/installation.html">website linked to earlier</a>.</p>

<div class="code-container" style="height:550px">
  <iframe class="code-text" src="https://dc25.github.io/showCode?codeURL=https%3A%2F%2Fraw.githubusercontent.com%2Fdc25%2FbuildPodman%2Fmain%2Fbuild.sh"></iframe>
  <hr />
  <div class="code-bar">
	  <a href="https://github.com/dc25/buildPodman/blob/main/build.sh" class="code-link">build.sh</a>
	  <a href="https://raw.githubusercontent.com/dc25/buildPodman/main/build.sh" class="code-raw-link">view raw</a>
  </div>
</div>
<p><br /></p>


  </div><a class="u-url" href="/2020/11/28/notes-on-switching-from-docker-to-podman.html" hidden></a>
</article>

      </div>
    </main>

    <div class="page-content">
      <div class="wrapper">
        

      </div>
    </div><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194
                11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0
                13.806c0-1.21.983-2.195 2.194-2.195zM10.606
                16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"
              />
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li><a class="u-email" href="mailto:davecompton7@gmail.com">davecompton7@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>What I am doing, what I have done, and what I learned along the way.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
<!-- Default Statcounter code for Davecompton.net
https://davecompton.net -->
<script type="text/javascript">
var sc_project=11610177; 
var sc_invisible=1; 
var sc_security="d324e394"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="real time web
analytics" href="https://statcounter.com/"
target="_blank"><img class="statcounter"
src="https://c.statcounter.com/11610177/0/d324e394/1/"
alt="real time web analytics"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
<!-- End of Statcounter Code -->
</body>

</html>
